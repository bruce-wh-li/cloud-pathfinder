<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.33">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/vuepress/src/.vuepress/public/ns/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="VuePress"><meta name="apple-mobile-web-app-title" content="VuePress"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>Persistent Configurations | </title><meta name="description" content="CPF Documentation">
    <link rel="modulepreload" href="/cloud-pathfinder/assets/app.32c85e0d.js"><link rel="modulepreload" href="/cloud-pathfinder/assets/09_persistent_configurations.html.0847f610.js"><link rel="modulepreload" href="/cloud-pathfinder/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/cloud-pathfinder/assets/09_persistent_configurations.html.03051bd7.js">
    <link rel="stylesheet" href="/cloud-pathfinder/assets/style.e044799a.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/cloud-pathfinder/" class=""><img class="logo" src="/cloud-pathfinder/cloud_pathfinder_icon_2022.png" alt><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/cloud-pathfinder/guide/" class="" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Pre-Reading Material</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/cloud-pathfinder/Documentation/Pre-reading-material/" class="" aria-label="Pre-Reading Material"><!--[--><!--]--> Pre-Reading Material <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Courses"><span class="title">Courses</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Courses"><span class="title">Courses</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>OpenShift</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/cloud-pathfinder/openshift101/" class="router-link-active" aria-label="OpenShift 101"><!--[--><!--]--> OpenShift 101 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Material"><span class="title">Material</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Material"><span class="title">Material</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>PDF&#39;s</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/bcgov/cloud-pathfinder/raw/master/docs/assets/Pre-reading-material.pdf" rel="noopener noreferrer" target="_blank" aria-label="Pre-reading-material"><!--[--><!--]--> Pre-reading-material <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/bcgov/cloud-pathfinder" rel="noopener noreferrer" target="_blank" aria-label="CloudPathfinder"><!--[--><!--]--> CloudPathfinder <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/cloud-pathfinder/guide/" class="" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Documentation"><span class="title">Documentation</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Pre-Reading Material</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/cloud-pathfinder/Documentation/Pre-reading-material/" class="" aria-label="Pre-Reading Material"><!--[--><!--]--> Pre-Reading Material <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Courses"><span class="title">Courses</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Courses"><span class="title">Courses</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>OpenShift</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/cloud-pathfinder/openshift101/" class="router-link-active" aria-label="OpenShift 101"><!--[--><!--]--> OpenShift 101 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Material"><span class="title">Material</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Material"><span class="title">Material</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>PDF&#39;s</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a class="external-link" href="https://github.com/bcgov/cloud-pathfinder/raw/master/docs/assets/Pre-reading-material.pdf" rel="noopener noreferrer" target="_blank" aria-label="Pre-reading-material"><!--[--><!--]--> Pre-reading-material <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/bcgov/cloud-pathfinder" rel="noopener noreferrer" target="_blank" aria-label="CloudPathfinder"><!--[--><!--]--> CloudPathfinder <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">OpenShift 101 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloud-pathfinder/openshift101/00_overview.html" class="sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/01_setup.html" class="sidebar-item" aria-label="Lab Setup"><!--[--><!--]--> Lab Setup <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/01_adding_team_members.html" class="sidebar-item" aria-label="Adding Team Members"><!--[--><!--]--> Adding Team Members <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/01b_web_console_overview.html" class="sidebar-item" aria-label="OCP 4 Web Console"><!--[--><!--]--> OCP 4 Web Console <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/02_builds.html" class="sidebar-item" aria-label="Builds"><!--[--><!--]--> Builds <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/03_deployment.html" class="sidebar-item" aria-label="Deployment"><!--[--><!--]--> Deployment <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/04_configuring_deployments.html" class="sidebar-item" aria-label="Exploring Deployment Options"><!--[--><!--]--> Exploring Deployment Options <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/05_resource_management.html" class="sidebar-item" aria-label="Resource Requests and Limits"><!--[--><!--]--> Resource Requests and Limits <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/06_application_availability.html" class="sidebar-item" aria-label="Application Availability"><!--[--><!--]--> Application Availability <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/07_autoscaling.html" class="sidebar-item" aria-label="Autoscaling"><!--[--><!--]--> Autoscaling <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/08_persistent_storage.html" class="sidebar-item" aria-label="Persistent Storage"><!--[--><!--]--> Persistent Storage <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloud-pathfinder/openshift101/09_persistent_configurations.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Persistent Configurations"><!--[--><!--]--> Persistent Configurations <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cloud-pathfinder/openshift101/09_persistent_configurations.html#configmaps" class="router-link-active router-link-exact-active sidebar-item" aria-label="ConfigMaps"><!--[--><!--]--> ConfigMaps <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloud-pathfinder/openshift101/09_persistent_configurations.html#secrets" class="router-link-active router-link-exact-active sidebar-item" aria-label="Secrets"><!--[--><!--]--> Secrets <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloud-pathfinder/openshift101/09_persistent_configurations.html#creating-secrets" class="router-link-active router-link-exact-active sidebar-item" aria-label="Creating Secrets"><!--[--><!--]--> Creating Secrets <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/cloud-pathfinder/openshift101/10_event_streams.html" class="sidebar-item" aria-label="Event Streams"><!--[--><!--]--> Event Streams <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/11_debugging_containers.html" class="sidebar-item" aria-label="Debugging Containers"><!--[--><!--]--> Debugging Containers <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/12_logging_and_visualizations.html" class="sidebar-item" aria-label="Logging and Visualizations"><!--[--><!--]--> Logging and Visualizations <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/13_metrics.html" class="sidebar-item" aria-label="Openshift 4 Metrics"><!--[--><!--]--> Openshift 4 Metrics <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/14_cheatsheet.html" class="sidebar-item" aria-label="Cheatsheet"><!--[--><!--]--> Cheatsheet <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/15_pod_lifecycle.html" class="sidebar-item" aria-label="Pod Lifecycle"><!--[--><!--]--> Pod Lifecycle <!--[--><!--]--></a><!----></li><li><a href="/cloud-pathfinder/openshift101/SUMMARY.html" class="sidebar-item" aria-label="Summary"><!--[--><!--]--> Summary <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="persistent-configurations" tabindex="-1"><a class="header-anchor" href="#persistent-configurations" aria-hidden="true">#</a> Persistent Configurations</h1><p>In cases where configurations need to change frequently or common configurations should be shared across deployments or pods, it is not ideal to build said configurations into the container image or maintain multiple copies of the configuration. OpenShift supports <code>configMaps</code> which can be a standalone object that is easily mounted into pods. In cases where the configuration file or data is sensitive in nature, OpenShift supports <code>secrets</code> to handle this sensitive data.</p><h3 id="configmaps" tabindex="-1"><a class="header-anchor" href="#configmaps" aria-hidden="true">#</a> ConfigMaps</h3><h4 id="creating-a-config-map-and-adding-it-to-a-deployment" tabindex="-1"><a class="header-anchor" href="#creating-a-config-map-and-adding-it-to-a-deployment" aria-hidden="true">#</a> Creating a Config Map and Adding it to a Deployment</h4><p>Create a configMap with arbitrary data and mount it inside of your <code>rocketchat-[username]</code> pod:</p><p><img src="/cloud-pathfinder/assets/07_persistent_config_01.38461ded.png" alt=""><img src="/cloud-pathfinder/assets/07_persistent_config_02.0795b339.png" alt=""></p><ul><li>In the Web Console, go to <code>+Add</code> and select <code>YAML</code></li><li>Paste in the following ConfigMap Code and save</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token key atrule">myfile.txt</span><span class="token punctuation">:</span> Hello world
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> rocketchat<span class="token punctuation">-</span><span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">-</span>configmap
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>Attach the <code>configMap</code> to your <code>rocketchat-[username]</code> deployment by navigating to the <code>YAML</code> tab in your Rocket Chat DeploymentConfig and pasting in the following code</p><ol><li>You will first need to create a <code>volume</code>. This is located under <code>.spec.template.spec.volumes</code></li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token punctuation">-</span> <span class="token key atrule">configMap</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> rocketchat<span class="token punctuation">-</span><span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">-</span>configmap
    <span class="token key atrule">name</span><span class="token punctuation">:</span> rocketchat<span class="token punctuation">-</span><span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">-</span>volume
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>Then create a <code>volumeMount</code> under <code>.spec.template.spec.containers.volumeMounts</code></li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> rocketchat<span class="token punctuation">-</span><span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">-</span>volume
    <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /opt/configs
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><blockquote><p>pro tip: if you are not sure what fields are available you can always use oc explain! <code>oc explain deployment.spec.template.spec.containers.volumeMounts</code></p></blockquote><p><img src="/cloud-pathfinder/assets/07_persistent_config_04.367d2e74.png" alt=""><img src="/cloud-pathfinder/assets/07_persistent_config_03.4b9ec4e9.png" alt=""></p><blockquote><p>it should like similar to this <img src="/cloud-pathfinder/assets/07_persistent_config_05.08dba9ea.png" alt=""></p></blockquote><ul><li><p>Save the changes which will trigger a new deployment of your <code>rocketchat-[username]</code> pod</p></li><li><p>Using the pod terminal in the Web Console or <code>oc rsh</code>, explore the path of the mounted configMap</p></li></ul><p><img src="/cloud-pathfinder/assets/07_persistent_config_06.b0d255bb.png" alt=""></p><h4 id="changing-config-map-content" tabindex="-1"><a class="header-anchor" href="#changing-config-map-content" aria-hidden="true">#</a> Changing Config Map Content</h4><p>The content in your <code>configMap</code> can be changed and in most cases it&#39;s NOT dynamically updated in the pod. With that said, a new deployment will be required for the changes to be picked up.</p><ul><li>Edit your <code>configMap</code> to add a new key-value pair that represents another file</li></ul><p>Navigate to <code>Administrator View -&gt; Workloads -&gt; Configmaps</code> from the console and select your ConfigMap from the list</p><p><img src="/cloud-pathfinder/assets/07_persistent_config_06.b0d255bb.png" alt=""><img src="/cloud-pathfinder/assets/07_persistent_config_07.f9037c1e.png" alt=""></p><ul><li>Using the pod terminal in the Web Console or <code>oc rsh</code>, explore the path of the mounted configMap</li></ul><p><img src="/cloud-pathfinder/assets/07_persistent_config_08.9d6a1c0e.png" alt=""></p><h3 id="secrets" tabindex="-1"><a class="header-anchor" href="#secrets" aria-hidden="true">#</a> Secrets</h3><p>Secrets can be added in a similar way as config maps but are geared towards the management of sensitive information. In OpenShift, these are base64 encoded, and encrypted on disk when stored in the cluster. In Pods, they never live on disk (unlike configmaps) and are only in memory. Secrets, from the Web Console, are focused on supporting:</p><ul><li>Username/Passwords</li><li>SSH Keys</li><li>SSL Certificates</li><li>Git config files</li></ul><p>&quot;Opaque&quot; secrets are supported and can contain any type of data, however, these must be configured on the command line with the <code>oc</code> cli.</p><h3 id="creating-secrets" tabindex="-1"><a class="header-anchor" href="#creating-secrets" aria-hidden="true">#</a> Creating Secrets</h3><ul><li>In the Web Console, go to <code>+Add</code> and select <code>YAML</code></li><li>Paste in the following Secret Code and save</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">stringData</span><span class="token punctuation">:</span>
  <span class="token key atrule">SECRET_API_KEY</span><span class="token punctuation">:</span> <span class="token string">&quot;I&#39;m ULTRA SECRET&quot;</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token null important">null</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> rocketchat<span class="token punctuation">-</span><span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">-</span>secret
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/cloud-pathfinder/assets/07_persistent_config_09.e34819b5.png" alt=""></p><ul><li>Explore the other mongo secrets to see different variations of secret data by navigating to <code>Administrator View -&gt; Workloads -&gt; Secrets</code></li></ul><p><img src="/cloud-pathfinder/assets/07_persistent_config_10.f8170398.png" alt=""><img src="/cloud-pathfinder/assets/07_persistent_config_11.46a1d679.png" alt=""></p><ul><li><p>Navigate back to your <code>rocketchat-[username]-secret</code> and attach the <code>secret</code> to your <code>rocketchat-[username]</code> DeploymentConfig by navigating to the <code>Add Secret to Workload</code></p></li><li><p>Attach the secret as an environment variable</p></li></ul><p><img src="/cloud-pathfinder/assets/07_persistent_config_12.43a97a52.png" alt=""><img src="/cloud-pathfinder/assets/07_persistent_config_13.d607f48e.png" alt=""></p><ul><li><p>This change will trigger a new deployment of your <code>rocketchat-[username]</code> pod</p></li><li><p>Once the pods have been redeployed the environment variable should be available for them to use. This is a very common pattern that applications can use to hold sensitive information like api keys in memory. You can verify that the environment variable exists by accessing the pod terminal or using <code>oc rsh</code> and outputting its value with a simple <code>echo $SECRET_API_KEY</code></p></li><li><p>From the cli, review the secret with <code>oc describe secret rocketchat-[username]-secret</code></p></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>oc describe secret rocketchat-<span class="token punctuation">[</span>username<span class="token punctuation">]</span>-secret
Name:         rocketchat-<span class="token punctuation">[</span>username<span class="token punctuation">]</span>-secret
Namespace:    <span class="token punctuation">[</span>namespace<span class="token punctuation">]</span>
Labels:       <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
Annotations:  <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

Type:  Opaque

Data
<span class="token operator">==</span><span class="token operator">==</span>
SECRET_API_KEY:  <span class="token number">16</span> bytes
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>Export the secret to view the contents with <code>oc get --export secret rocketchat-[username]-secret -o yaml</code></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>oc get --export secret rocketchat-<span class="token punctuation">[</span>username<span class="token punctuation">]</span>-secret -o yaml
apiVersion: v1
data:
  SECRET_API_KEY: <span class="token assign-left variable">SSdtIFVMVFJBIFNFQ1JFVA</span><span class="token operator">==</span>
kind: Secret
metadata:
  creationTimestamp: null
  name: rocketchat-<span class="token punctuation">[</span>username<span class="token punctuation">]</span>-secret
  selfLink: /api/v1/namespaces/<span class="token punctuation">[</span>namespace<span class="token punctuation">]</span>/secrets/rocketchat-<span class="token punctuation">[</span>username<span class="token punctuation">]</span>-secret
type: Opaque
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>on Mac&#39;s and Linux machines that have the base64 binary, you can decode the value as a reference</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;c2hlYXN0ZXdhcnQ=&quot;</span> <span class="token operator">|</span> base64 -d
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li><p>To edit an existing secret, from the webconsole you can navigate to the secret and select the <code>YAML</code> tab or <code>oc edit secret rocketchat-[username]-secret</code> from the cli. Secrets are base64 encoded. If adding new values or editing existing values of a Secret it is often easier to edit in plain text and have it b64 encoded for you. To do this you will need to modify the <code>data</code> field and change it to <code>stringData</code> prior to adding or editing values.</p></li><li><p>Add another secret value but this time as a sensitive configuration file such as an ssh key</p></li></ul><p>From the web console <img src="/cloud-pathfinder/assets/07_persistent_config_14.b1eb6fe2.png" alt=""> With <code>oc edit</code><img src="/cloud-pathfinder/assets/07_persistent_config_15.3aef90e5.png" alt=""></p><blockquote><p>take note that you were adding a new value <code>id_rsa</code> under a field called <code>stringData</code>. Openshift will automatically, encode that as base64 and place it in the <code>data</code> field upon saving. You can confirm this with <code>oc get secret rocketchat-[username]-secret -o yaml</code> after saving.</p></blockquote><ul><li>Redeploy the application after secret changes</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/bcgov/cloud-pathfinder/edit/master/vuepress/src/openshift101/09_persistent_configurations.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 66041048+jon-mc-git@users.noreply.github.com">Jon McCaig</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/cloud-pathfinder/openshift101/08_persistent_storage.html" class="" aria-label="Persistent Storage"><!--[--><!--]--> Persistent Storage <!--[--><!--]--></a></span><span class="next"><a href="/cloud-pathfinder/openshift101/10_event_streams.html" class="" aria-label="Event Streams"><!--[--><!--]--> Event Streams <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/cloud-pathfinder/assets/app.32c85e0d.js" defer></script>
  </body>
</html>
